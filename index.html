<!DOCTYPE html>
  // 1. ุฃุถู ูุฐู ุงูุฃุณุทุฑ ูู ุงูุจุฏุงูุฉ ุชูุงูุงู
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
  import { getAuth, GoogleAuthProvider, signInWithRedirect, getRedirectResult } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  // 2. ููุง ุชุถุน ุงูู Config ุงูุฎุงุต ุจู (ุงูุฐู ูุจุฏุฃ ุจู const firebaseConfig)
  const firebaseConfig = {
    apiKey: "AIza...",
    authDomain: "...",
    // ... ุจุงูู ุงูุจูุงูุงุช
  };

  // 3. ุชุนุฑูู ุงูุฃุฏูุงุช
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();

  // 4. ุฏุงูุฉ ุงููุฒุงููุฉ (ุงูุชู ุนุฏููุงูุง ูุชุนูู ุจุฏูู Pop-up)
  window.loginAndSync = function() {
      signInWithRedirect(auth, provider);
  };

  // 5. ููุฏ ุงุณุชูุจุงู ุงููุชูุฌุฉ ุจุนุฏ ุงูุนูุฏุฉ ูู ุฌูุฌู
  getRedirectResult(auth).then(async (result) => {
      if (result && result.user) {
          const localData = localStorage.getItem('khatmaProgress');
          if (localData) {
              await setDoc(doc(db, "users", result.user.uid), {
                  khatma: JSON.parse(localData),
                  displayName: result.user.displayName,
                  lastSync: new Date()
              });
              alert("ุชูุช ุงููุฒุงููุฉ ุจูุฌุงุญ โ");
          }
      }
  });
</script>

<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุญููุจุฉ ุงููุคูู - ุงูุฅุตุฏุงุฑ ุงูููุจุฉ</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="sideMenu" class="side-menu">
    <button class="close-btn" onclick="toggleMenu()">ร</button>
    <h3 style="text-align:center;color:var(--gold);">ุงูุฅุนุฏุงุฏุงุช</h3>
    <hr style="border:0.5px solid rgba(201,176,122,0.3);">
<div class="menu-item">
    <span>ูุฒุงููุฉ ุงูุฎุชูุฉ (ุณุญุงุจู)</span>
    <button class="menu-tool-btn" onclick="loginAndSync()">โ๏ธ</button>
</div>

<div class="menu-item">
    <span>ุฅุดุนุงุฑุงุช ุงููุธุงู</span>
    <button class="menu-tool-btn" onclick="requestNotify()">๐</button>
</div>

    <div class="menu-item">
        <span>ุงููุถุน ุงููุธูู</span>
        <button id="darkModeBtn" class="menu-tool-btn" onclick="toggleDarkMode()">๐</button>
    </div>

    <div class="menu-item">
        <span>ุฃุตูุงุช ุงูุชูุจูู</span>
        <button id="muteBtn" class="menu-tool-btn" onclick="toggleMute()">๐</button>
    </div>

    <div class="menu-item">
        <span>ุญุฌู ุงูุฎุท</span>
        <div class="font-controls">
            <button class="menu-tool-btn" onclick="changeFontSize(2)">A+</button>
            <button class="menu-tool-btn" onclick="changeFontSize(-2)">A-</button>
        </div>
    <div class="menu-item">
    <span>ุชุญุฏูุซ ุงููููุน</span>
    <button class="menu-tool-btn" onclick="getQibla()">๐</button>
</div>

<div class="menu-item">
    <span>ุชูุจููุงุช ุงูุฃุฐุงู</span>
    <button id="notifBtn" class="menu-tool-btn" onclick="requestNotificationPermission()">๐</button>
</div>

</div>

    </div>

    <p style="font-size:12px;text-align:center;margin-top:50px;opacity:0.6;">
        ุฅุตุฏุงุฑ ุญููุจุฉ ุงููุคูู 2025
    </p>
</div>

<header>
    <div class="menu-icon" onclick="toggleMenu()">โฐ</div>
    <h1>ุญููุจุฉ ุงููุคูู</h1>
    
    <div class="main-nav">
<div class="quran-menu-wrapper">
    <button id="quranTab" class="active dropbtn" onclick="toggleQuranDropdown(event)">ุงููุฑุขู ุงููุฑูู โพ</button>
    <div id="quranDropdown" class="dropdown-content">
        <a href="javascript:void(0)" onclick="selectQuranOption('quran')">ุงููุตุญู ูุงููุงู</a>
        <a href="javascript:void(0)" onclick="selectQuranOption('topics')">ุงูููุฑุณ ุงูููุถูุนู</a>
    </div>
</div>

        <button id="azkarTab" onclick="switchMainTab('azkar')">ูุณู ุงูุฃุฐูุงุฑ</button>
        <button id="sebhaTab" onclick="switchMainTab('sebha')">ุงูุณุจุญุฉ</button>
        <button id="prayerTab" onclick="switchMainTab('prayer')">ููุงููุช ุงูุตูุงุฉ</button>
<button id="qiblaTab" onclick="switchMainTab('qibla')">ุงุชุฌุงู ุงููุจูุฉ</button>
<button id="khatmaTab" onclick="switchMainTab('khatma')">ุชุญุฏู ุงูุฎุชูุฉ ๐</button>
<button id="namesTab" onclick="switchMainTab('names')">โจ ุฃุณูุงุก ุงููู ุงูุญุณูู</button>

    </div>
</header>

<div class="container">

<!-- ================= ุงููุฑุขู ================= -->
<div id="quran-section">
    
    <div id="full-quran-view">
        <div id="daily-content" class="daily-card">
            <div class="daily-header">
                <span class="daily-icon">๐</span>
                <span class="daily-title">ุขูุฉ ุงูููู</span>
            </div>
            <p id="daily-text" class="daily-text">ุฌุงุฑู ุชุญููู ุงูุขูุฉ...</p>
            <small id="daily-ref" class="daily-ref"></small>
            <button onclick="copyDailyAyah()" class="copy-btn">ูุณุฎ ุงูุขูุฉ ๐</button>
        </div>

        <div class="search-box">
            <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุนู ุณูุฑุฉ..." onkeyup="filterSurahs()">
        </div>
        <div class="surah-grid" id="surahList"></div>
    </div>

    <div id="quran-view" style="display:none;">
        <div style="text-align:center;margin:10px;">
            <button class="modern-back-btn" onclick="showMain()">๐ ุงูุนูุฏุฉ ูููุงุฆูุฉ</button>
        </div>

        <div class="player-container modern-style">
            <h2 id="current-surah-title"></h2>

            <div class="reciter-section">
                <select id="reciterSelect" onchange="updateAudioSource()">
                    <option value="afs">๐๏ธ ูุดุงุฑู ุงูุนูุงุณู</option>
                    <option value="minsh">๐๏ธ ูุญูุฏ ุตุฏูู ุงูููุดุงูู</option>
                    <option value="basit">๐๏ธ ุนุจุฏ ุงูุจุงุณุท ุนุจุฏ ุงูุตูุฏ</option>
                    <option value="husr">๐๏ธ ูุญููุฏ ุฎููู ุงูุญุตุฑู</option>
                    <option value="maher">๐๏ธ ูุงูุฑ ุงููุนูููู</option>
                    <option value="qtm">๐๏ธ ูุงุตุฑ ุงููุทุงูู</option>
                    <option value="yasser">๐๏ธ ูุงุณุฑ ุงูุฏูุณุฑู</option>
                </select>
            </div>

            <div class="modern-player-layout">
                <button id="playBtn" class="play-btn-small" onclick="toggleAudio()">โท</button>
                <div class="progress-wrapper">
                    <span id="currentTime">0:00</span>
                    <input type="range" id="seekSlider" value="0" max="100" oninput="seekAudio()">
                    <span id="durationTime">0:00</span>
                </div>

            <audio id="audioPlayer"></audio>
        </div>

        <div class="ayah-text" id="ayahsContainer"></div>
    </div>

    <div id="topics-view" style="display:none; padding:10px;">
        <h3 style="color:var(--gold); text-align:center; margin-bottom:20px; font-size: 1.5rem;">ุงูููุฑุณ ุงูููุถูุนู ุงูุฌุงูุน</h3>
        <div class="surah-grid">
            <div class="surah-card" onclick="showTopicSurahs('ูุตุต ุงูุฃูุจูุงุก', [11, 12, 14, 18, 19, 20, 21, 28])">๐ ูุตุต ุงูุฃูุจูุงุก</div>
            <div class="surah-card" onclick="showTopicSurahs('ุฃููุงู ุงูููุงูุฉ', [75, 78, 81, 82, 84, 99, 101])">๐ ุฃููุงู ุงูููุงูุฉ</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุนุจุงุฏุงุช ูุงูุฃุญูุงู', [2, 4, 5, 9, 22, 24, 62])">๐ ุงูุนุจุงุฏุงุช ูุงูุฃุญูุงู</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุฑููุฉ ูุงูุดูุงุก', [1, 112, 113, 114, 17, 10])">๐ก๏ธ ุงูุฑููุฉ ูุงูุดูุงุก</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุฃุฎูุงู ูุงูุขุฏุงุจ', [31, 49, 103, 104, 107, 68])">โค๏ธ ุงูุฃุฎูุงู ูุงูุขุฏุงุจ</div>
            <div class="surah-card" onclick="showTopicSurahs('ุนุธูุฉ ุงูุฎุงูู', [13, 16, 27, 30, 35, 41, 55])">๐ ุนุธูุฉ ุงูุฎุงูู</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุฌูุฉ ููุนูููุง', [55, 56, 76, 88, 39, 43])">๐ณ ุงูุฌูุฉ ููุนูููุง</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุตุจุฑ ูุงูุงุจุชูุงุก', [2, 3, 90, 93, 94, 103])">๐ ุงูุตุจุฑ ูุงูุงุจุชูุงุก</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงูุชูุญูุฏ ูุงูุนููุฏุฉ', [1, 112, 109, 2, 3, 59])">โ๏ธ ุงูุชูุญูุฏ ูุงูุนููุฏุฉ</div>
            <div class="surah-card" onclick="showTopicSurahs('ุงููุณุจุญุงุช', [57, 59, 61, 62, 64])">โจ ุงููุณุจุญุงุช</div>
        </div>
        <button onclick="selectQuranOption('quran')" style="margin: 30px auto; display: block; background:var(--gold); color:var(--dark-teal); border:none; padding:12px 25px; border-radius:12px; cursor:pointer; font-family:'Amiri', serif; font-weight:bold;">ุงูุนูุฏุฉ ูููุตุญู ุงููุงูู</button>
    </div>

<!-- ================= ุงูุฃุฐูุงุฑ ================= -->
<div id="azkar-section" style="display:none;">
    <div class="azkar-categories" id="azkarCats">
        <div class="category-card" onclick="loadAzkar('morning')">โ๏ธ ุฃุฐูุงุฑ ุงูุตุจุงุญ</div>
        <div class="category-card" onclick="loadAzkar('evening')">๐ ุฃุฐูุงุฑ ุงููุณุงุก</div>
        <div class="category-card" onclick="loadAzkar('sleep')">๐ ุฃุฐูุงุฑ ุงูููู</div>
        <div class="category-card" onclick="loadAzkar('afterPrayer')">๐ฟ ุจุนุฏ ุงูุตูุงุฉ</div>
        <div class="category-card" onclick="loadAzkar('generalDuas')">๐คฒ ุฃุฏุนูุฉ ูุจููุฉ</div>
    </div>

    <div id="azkar-content" style="display:none;">
        <div class="top-controls">
            <button class="modern-back-btn" onclick="backToAzkarCats()">โฉ ุงูุนูุฏุฉ</button>
            <button class="modern-reset-soft" onclick="resetAzkarProgress()">ุชุตููุฑ</button>
        </div>

        <h2 id="azkar-title" style="text-align:center;color:var(--gold);"></h2>
        <div id="azkarList"></div>
    </div>
<!-- ================= ุงูุณุจุญุฉ ================= -->
<div id="sebha-section" style="display:none;">
    <div class="goal-setting">
        ุงููุฏู ุงููููู:
        <input type="number" id="sebhaGoal" value="100" min="1" onchange="updateGoal()">
    </div>

    <div class="progress-container">
        <div id="sebhaBar" class="progress-bar"></div>
    </div>

    <div class="sebha-circle" onclick="incrementSebha()">
        <span id="sebhaCounter">0</span>
        <small id="sebhaStatus">ุงุถุบุท ููุชุณุจูุญ</small>
    </div>

    <button class="modern-reset-soft" onclick="resetSebha()">ุชุตููุฑ ุงูุนุฏุงุฏ</button>

    <div class="timer-wrapper">
        <span>ุงูุชุตููุฑ ุงูุชููุงุฆู:</span>
        <div id="countdown-timer" class="modern-timer">00:00:00</div>
    </div>
</div>
<div id="prayer-section" style="display:none; text-align:center;">
    <div class="prayer-hero-card">
        <h3 id="next-prayer-name">ุฌุงุฑู ุชุญุฏูุฏ ูููุนู...</h3>
        <div id="next-prayer-timer" class="big-timer">00:00:00</div>
    </div>

    <div class="prayer-detailed-grid">
        <div class="p-card"><span>ุงููุฌุฑ</span><b id="fajr-time">--:--</b></div>
        <div class="p-card"><span>ุงูุธูุฑ</span><b id="dhuhr-time">--:--</b></div>
        <div class="p-card"><span>ุงูุนุตุฑ</span><b id="asr-time">--:--</b></div>
        <div class="p-card"><span>ุงููุบุฑุจ</span><b id="maghrib-time">--:--</b></div>
        <div class="p-card"><span>ุงูุนุดุงุก</span><b id="isha-time">--:--</b></div>
</div>
<div id="qibla-section" style="display:none; text-align:center;">
    <div class="qibla-container">
        <h3>ุงุชุฌุงู ุงููุจูุฉ</h3>
        
        <button id="enable-compass-btn" onclick="askCompassPermission()" style="background:var(--gold); color:var(--dark-teal); border:none; padding:10px 20px; border-radius:12px; font-weight:bold; margin-bottom:15px; cursor:pointer; font-family:'Amiri', serif;">
            ุชุดุบูู ุงูุจูุตูุฉ ุงูุญูุฉ ๐งญ
        </button>

        <div class="compass" style="position: relative;">
            <div class="compass-arrow" id="compass-pointer"></div>
            <div class="kaaba-icon">๐</div>
        </div>
        <div class="qibla-degrees"><span id="qibla-deg">--</span>ยฐ</div>
        <p id="qibla-status" style="margin-top:10px; font-size:14px;">ุงุถุบุท ุงูุฒุฑ ูุชูุนูู ุงูุญุฑูุฉ</p>
    </div>
</div>
<div id="khatma-section" style="display:none; text-align:center; padding:20px;">
    <div class="daily-card shadow-lg" style="background: white; border-radius: 15px; padding: 20px; max-width: 800px; margin: auto; border: 1px solid #eee;">
        <h2 style="color:var(--gold);">๐ ุชุญุฏู ุงูุฎุชูุฉ (30 ููู)</h2>
        
        <div class="progress-container" style="height: 20px; background:#eee; border-radius:10px; overflow:hidden; margin-top:10px;">
            <div id="totalKhatmaBar" style="background: linear-gradient(90deg, #d4af37, #f1c40f); width: 0%; height:100%; transition: 0.5s;"></div>
        </div>
        <small id="total-percent-text" style="color:var(--dark-teal); font-weight:bold; display:block; margin-top:5px;">ุงูุชูุฏู ุงูููู: 0%</small>

        <hr style="margin:20px 0; opacity: 0.1;">

        <div id="khatma-content-area">
            <div id="start-khatma-view" style="display:none;">
                <h3 style="color:var(--dark-teal);">ูุฑุญุจุงู ุจู ูู ุชุญุฏู ุงูุฎุชูุฉ</h3>
                <p>ุงุถุบุท ุฃุฏูุงู ูุจุฏุก ุฑุญูุฉ ุงูุฎุชูุฉ ูุชุณุฌูู ุชุงุฑูุฎ ุงูููู</p>
                <button class="modern-back-btn" style="background:var(--gold); color:white; padding:15px 40px; border-radius:30px; border:none; cursor:pointer; font-weight:bold; margin-top:10px;" onclick="initializeKhatma()">๐ ุงุจุฏุฃ ุงูุชุญุฏู ุงูุขู</button>
            </div>

            <div id="active-khatma-view" style="display:none;">
                <h3 id="daily-task-title" style="color:var(--dark-teal);">ูุฑุฏ ุงูููู (ุงูุฌุฒุก 1)</h3>
                <p id="khatma-start-date" style="font-size:0.9rem; color:#666;"></p>
                <div id="khatma-timer" style="background:#fef9e7; color:#d4af37; padding:10px; border-radius:10px; margin:15px 0; font-weight:bold; border:1px solid #f1c40f;">
                    โณ ูุชุจูู ุนูู ููุงูุฉ ุงูููู: <span id="time-left">--:--</span>
                </div>
                <button class="modern-back-btn" style="background:var(--dark-teal); color:var(--gold); padding:15px 40px; border-radius:30px; cursor:pointer; border:none;" onclick="startKhatmaReading()">๐ ุชุงุจุน ุงููุฑุงุกุฉ ุงูุขู</button>
                <br>
                <button onclick="resetKhatma()" style="background:none; border:none; color:#e74c3c; cursor:pointer; margin-top:15px; font-size:0.8rem; text-decoration:underline;">ุฅุนุงุฏุฉ ุถุจุท ุงูุชุญุฏู</button>
            </div>

            <div id="khatma-reading-area" style="display:none; margin-top:20px;">
                <div class="progress-container" style="height: 8px; background:#ddd; border-radius:4px; margin-bottom:10px;">
                    <div id="juzInnerBar" style="background: var(--dark-teal); width: 0%; height:100%; transition: 0.3s;"></div>
                </div>
                <div id="khatma-ayahs-display" style="background:#f9f9f9; padding:20px; border-radius:15px; font-size:1.6rem; line-height:2.8; text-align:right; border:1px solid #ddd; max-height:450px; overflow-y:auto; direction:rtl;"></div>
                <div style="margin-top:15px;">
                    <button onclick="markFullJuzDone()" style="background:#27ae60; color:white; border:none; padding:10px 20px; border-radius:5px; cursor:pointer;">โ ุฎุชูุช ุงูุฌุฒุก</button>
                    <button onclick="closeKhatmaReading()" style="background:#95a5a6; color:white; border:none; padding:10px 20px; border-radius:5px; margin-right:5px; cursor:pointer;">ุฅุบูุงู</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="names-section" style="display:none; padding:20px; text-align:center;">
    <h2 style="color:var(--gold);">โจ ุฃุณูุงุก ุงููู ุงูุญุณูู โจ</h2>
    <div id="names-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 15px; margin-top: 20px;"></div>
    
    <div id="name-details-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000; justify-content:center; align-items:center; padding:20px;">
        <div style="background:white; border-radius:20px; padding:30px; max-width:500px; width:100%; position:relative; text-align:right; border:3px solid var(--gold);">
            <button onclick="closeNameDetails()" style="position:absolute; top:10px; left:10px; border:none; background:none; font-size:25px; cursor:pointer;">โ</button>
            <h1 id="modal-name-title" style="color:var(--gold); text-align:center; font-size:3rem; margin-bottom:10px;"></h1>
            <hr>
            <p id="modal-name-desc" style="line-height:1.6; font-size:1.1rem; margin-top:20px;"></p>
            <p id="modal-name-count" style="font-weight:bold; color:var(--dark-teal); margin-top:10px;"></p>
        </div>
    </div>
</div>

</div> ```

**ุงูุขูุ ุนุฏูู ููู ุงูู HTML ูุฏูู ุจูุงุกู ุนูู ูุฐุง ุงูุชุฑุชูุจ. ุฅุฐุง ุงูุชููุชุ ุฃุฑุณู ูู ููู ุงูู `script.js` ููููู ุจุชูุธููู ููุญุตู ุจุฏูุฉ ุฎุทูุฉ ุจุฎุทูุฉ.** ูู ููุช ุจุงูุชุนุฏููุ

</div>

<audio id="notificationSound" src="https://www.soundjay.com/buttons/sounds/button-37a.mp3"></audio>
<script src="script.js"></script>
<audio id="azanSound" src="https://www.islamcan.com/common/makkah.mp3" preload="auto"></audio>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // ุถุน ุงูููุฏ ุงูุฐู ูุณุฎุชู ูู ุงูุฎุทูุฉ ุฑูู 1 ููุง
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "123456789",
    appId: "1:123456789:web:abcdef"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const provider = new GoogleAuthProvider();

  // ุฏุงูุฉ ุชุณุฌูู ุงูุฏุฎูู ูุงููุฒุงููุฉ
  window.loginAndSync = async function() {
    try {
      const result = await signInWithPopup(auth, provider);
      const user = result.user;
      
      // 1. ูุฒุงููุฉ ุงูุฎุชูุฉ ูู ุงููุงุชู ููุณุญุงุจ
      const localData = localStorage.getItem('khatmaProgress');
      if (localData) {
          await setDoc(doc(db, "users", user.uid), {
              khatma: JSON.parse(localData),
              email: user.email,
              lastSync: new Date()
          });
          alert(`ุชู ุงููุฒุงููุฉ ุจูุฌุงุญ ูุง ${user.displayName}`);
      }
    } catch (error) {
      alert("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงููุฒุงููุฉ: " + error.message);
    }
  };

  // ุฏุงูุฉ ุงูุฅุดุนุงุฑุงุช ุงูุจุณูุทุฉ
  window.requestNotify = function() {
      Notification.requestPermission().then(permission => {
          if (permission === "granted") {
              new Notification("ุญููุจุฉ ุงููุคูู", { body: "ุชู ุชูุนูู ุงูุชูุจููุงุช ุจูุฌุงุญ โ" });
          }
      });
  };
<script type="module">

</body>
</html>
